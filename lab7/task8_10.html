<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Лабораторна робота №7</title>
  <link rel="stylesheet" href="style2.css">
  <div class="nav-buttons">
    <a href="lab7.html" class="btn-nav">На головну</a>
  </div>
</head>
<body>
  <h1>Лабораторна робота №7. Завдання 8–10</h1>

  <section>
    <h2>Завдання 8: Обчислити кількість голосних літер у рядку</h2>
    <input id="str8" type="text" placeholder="Введіть рядок">
    <button onclick="countVowels()">Виконати</button>
    <p id="res8"></p>
  </section>

  <section>
    <h2>Завдання 9: Видалити всі символи, що не є алфавітними</h2>
    <input id="str9" type="text" placeholder="Введіть рядок">
    <button onclick="removeNonAlphabetic()">Виконати</button>
    <p id="res9"></p>
  </section>

  <section>
    <h2>Завдання 10: Знайти найменший підрядок, що містить усі літери іншого рядка</h2>
    <input id="str10" type="text" placeholder="Введіть основний рядок" style="display: block; margin-bottom: 10px;">
    <input id="pattern10" type="text" placeholder="Введіть рядок з літерами для пошуку">
    <button onclick="findSmallestSubstring()">Знайти</button>
    <p id="res10"></p>
  </section>

  <script>
    function countVowels() {
      const str = document.getElementById("str8").value;
      const vowels = str.match(/[aeiouаеєиіїоуюяAEIOUАЕЄИІЇОУЮЯ]/g);
      const count = vowels ? vowels.length : 0;
      document.getElementById("res8").textContent = `Кількість голосних літер: ${count}`;
    }

    function removeNonAlphabetic() {
      const str = document.getElementById("str9").value;
      const result = str.replace(/[^a-zA-Zа-яА-ЯєЄїЇіІґҐ]/g, "");
      document.getElementById("res9").textContent = `Результат: ${result}`;
    }

    function findSmallestSubstring() {
      const str = document.getElementById("str10").value;
      const pattern = document.getElementById("pattern10").value;
      
      if (!pattern) {
        document.getElementById("res10").textContent = "Будь ласка, введіть рядок для пошуку";
        return;
      }

      const result = getSmallestSubstring(str, pattern);
      document.getElementById("res10").textContent = result 
        ? `Найменший підрядок: "${result}"`
        : "Підрядок не знайдено";
    }

    function getSmallestSubstring(str, pattern) {
      if (str.length === 0 || pattern.length === 0) return "";
      
      const patternMap = new Map();
      for (let char of pattern) {
        patternMap.set(char, (patternMap.get(char) || 0) + 1);
      }

      let required = patternMap.size;
      let left = 0, right = 0;
      let formed = 0;
      const windowCounts = new Map();
      
      let ans = [-1, 0, 0]; 

      while (right < str.length) {
        let char = str[right];
        windowCounts.set(char, (windowCounts.get(char) || 0) + 1);

        if (patternMap.has(char) && windowCounts.get(char) === patternMap.get(char)) {
          formed++;
        }

        while (left <= right && formed === required) {
          char = str[left];
          
          if (ans[0] === -1 || right - left + 1 < ans[0]) {
            ans[0] = right - left + 1;
            ans[1] = left;
            ans[2] = right;
          }

          windowCounts.set(char, windowCounts.get(char) - 1);
          if (patternMap.has(char) && windowCounts.get(char) < patternMap.get(char)) {
            formed--;
          }
          left++;
        }
        right++;
      }

      return ans[0] === -1 ? "" : str.substring(ans[1], ans[2] + 1);
    }
  </script>
</body>
</html>